<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Election Management System - DBMS Project</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        header {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            text-align: center;
        }

        h1 {
            color: #667eea;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .subtitle {
            color: #666;
            font-size: 1.1em;
        }

        .nav-tabs {
            display: flex;
            gap: 10px;
            background: white;
            padding: 15px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .tab-btn {
            flex: 1;
            min-width: 120px;
            padding: 15px 25px;
            border: none;
            background: #f5f5f5;
            color: #333;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s;
        }

        .tab-btn:hover {
            background: #e0e0e0;
            transform: translateY(-2px);
        }

        .tab-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .content {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            display: none;
        }

        .content.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }

        th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-weight: 600;
            position: sticky;
            top: 0;
        }

        tr:hover {
            background: #f5f5f5;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.3);
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            margin: 10px 0;
        }

        .stat-label {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .query-section {
            margin-top: 30px;
            padding: 20px;
            background: #f9f9f9;
            border-radius: 10px;
        }

        .query-btn {
            padding: 12px 25px;
            margin: 5px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.95em;
            transition: all 0.3s;
        }

        .query-btn:hover {
            background: #764ba2;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .chart-container {
            margin-top: 30px;
            padding: 20px;
            background: #f9f9f9;
            border-radius: 10px;
        }

        .section-title {
            color: #667eea;
            font-size: 1.5em;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
        }

        .search-box {
            width: 100%;
            padding: 12px 20px;
            margin-bottom: 20px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1em;
            transition: all 0.3s;
        }

        .search-box:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 10px rgba(102, 126, 234, 0.2);
        }

        .badge {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
        }

        .badge-primary {
            background: #667eea;
            color: white;
        }

        .badge-success {
            background: #4caf50;
            color: white;
        }

        .badge-info {
            background: #2196f3;
            color: white;
        }

        footer {
            text-align: center;
            color: white;
            margin-top: 40px;
            padding: 20px;
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Election Management System</h1>
            <p class="subtitle">Database Application</p>
            <p style="color: #999; margin-top: 10px;">Bhargavi Salunkhe, Sakshi Patil, Shivanjali Pawar</p>
        </header>

        <div class="nav-tabs">
            <button class="tab-btn active" onclick="showTab('dashboard')">Dashboard</button>
            <button class="tab-btn" onclick="showTab('parties')">Parties</button>
            <button class="tab-btn" onclick="showTab('candidates')">Candidates</button>
            <button class="tab-btn" onclick="showTab('voters')">Voters</button>
            <button class="tab-btn" onclick="showTab('elections')">Elections</button>
            <button class="tab-btn" onclick="showTab('results')">Results</button>
            <button class="tab-btn" onclick="showTab('queries')">SQL Queries</button>
            <button class="tab-btn" onclick="showTab('about')">About</button>
        </div>

        <div id="dashboard" class="content active">
            <h2 class="section-title">System Overview</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-label">Total Parties</div>
                    <div class="stat-number" id="totalParties">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Total Candidates</div>
                    <div class="stat-number" id="totalCandidates">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Registered Voters</div>
                    <div class="stat-number" id="totalVoters">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Total Elections</div>
                    <div class="stat-number" id="totalElections">0</div>
                </div>
            </div>
            <div class="chart-container">
                <canvas id="dashboardChart"></canvas>
            </div>
        </div>

        <div id="parties" class="content">
            <h2 class="section-title">Political Parties</h2>
            <input type="text" class="search-box" placeholder="Search parties..." onkeyup="searchTable(this, 'partiesTable')">
            <table id="partiesTable">
                <thead>
                    <tr>
                        <th>Party ID</th>
                        <th>Party Name</th>
                        <th>Symbol</th>
                        <th>Candidates</th>
                    </tr>
                </thead>
                <tbody id="partiesBody"></tbody>
            </table>
        </div>

        <div id="candidates" class="content">
            <h2 class="section-title">Candidates</h2>
            <input type="text" class="search-box" placeholder="Search candidates..." onkeyup="searchTable(this, 'candidatesTable')">
            <table id="candidatesTable">
                <thead>
                    <tr>
                        <th>Candidate ID</th>
                        <th>Name</th>
                        <th>Party</th>
                        <th>Election ID</th>
                    </tr>
                </thead>
                <tbody id="candidatesBody"></tbody>
            </table>
        </div>

        <div id="voters" class="content">
            <h2 class="section-title">Registered Voters</h2>
            <input type="text" class="search-box" placeholder="Search voters..." onkeyup="searchTable(this, 'votersTable')">
            <table id="votersTable">
                <thead>
                    <tr>
                        <th>Voter ID</th>
                        <th>Name</th>
                        <th>Gender</th>
                        <th>Authority ID</th>
                        <th>Aadhaar No</th>
                    </tr>
                </thead>
                <tbody id="votersBody"></tbody>
            </table>
        </div>

        <div id="elections" class="content">
            <h2 class="section-title">Elections</h2>
            <table>
                <thead>
                    <tr>
                        <th>Election ID</th>
                        <th>No. of Voters</th>
                        <th>Participants</th>
                        <th>Result Date</th>
                        <th>Ruling Span</th>
                        <th>Authority</th>
                    </tr>
                </thead>
                <tbody id="electionsBody"></tbody>
            </table>
        </div>

        <div id="results" class="content">
            <h2 class="section-title">Election Results & Votes</h2>
            <div class="chart-container">
                <canvas id="votesChart"></canvas>
            </div>
            <table>
                <thead>
                    <tr>
                        <th>Vote ID</th>
                        <th>Candidate</th>
                        <th>Date</th>
                        <th>Election ID</th>
                        <th>Voter</th>
                    </tr>
                </thead>
                <tbody id="votesBody"></tbody>
            </table>
        </div>

        <div id="queries" class="content">
            <h2 class="section-title">SQL Query Results</h2>
            <div class="query-section">
                <h3>Execute Pre-defined Queries:</h3>
                <button class="query-btn" onclick="executeQuery(1)">Party with Most Candidates (After 1989)</button>
                <button class="query-btn" onclick="executeQuery(2)">Voter Change % (2010-2015)</button>
                <button class="query-btn" onclick="executeQuery(3)">Election Authority History</button>
                <button class="query-btn" onclick="executeQuery(4)">Non-Voter Citizens</button>
                <button class="query-btn" onclick="executeQuery(5)">State Assembly Authorities</button>
            </div>
            <div id="queryResults" style="margin-top: 20px;"></div>
        </div>

        <div id="about" class="content">
            <h2 class="section-title">About the Project</h2>
            <div style="line-height: 1.8;">
                <h3 style="color: #667eea; margin-top: 20px;">Project Description</h3>
                <p>This Election Management System is a comprehensive database application that models the Indian election system, including various levels from Panchayat to Lok Sabha elections.</p>
                
                <h3 style="color: #667eea; margin-top: 20px;">Key Features</h3>
                <ul style="margin-left: 20px; margin-top: 10px;">
                    <li>Manages multiple types of elections (Rajya Sabha, Lok Sabha, State Assembly, Panchayat)</li>
                    <li>Tracks parties, candidates, voters, and election authorities</li>
                    <li>Stores voting records and election results</li>
                    <li>Normalized database schema to reduce data redundancy</li>
                    <li>Comprehensive SQL queries for data analysis</li>
                </ul>

                <h3 style="color: #667eea; margin-top: 20px;">Database Schema</h3>
                <p><strong>Core Tables:</strong></p>
                <ul style="margin-left: 20px; margin-top: 10px;">
                    <li><strong>PARTY:</strong> Political parties with their symbols</li>
                    <li><strong>CANDIDATE:</strong> Candidates linked to parties and elections</li>
                    <li><strong>VOTER:</strong> Registered voters with citizen details</li>
                    <li><strong>ELECTION:</strong> Election events with metadata</li>
                    <li><strong>VOTES:</strong> Individual voting records</li>
                    <li><strong>CITIZEN:</strong> Citizen information and demographics</li>
                    <li><strong>ELECTION_AUTHORITY:</strong> Bodies conducting elections</li>
                </ul>

                <h3 style="color: #667eea; margin-top: 20px;">Technology Stack</h3>
                <ul style="margin-left: 20px; margin-top: 10px;">
                    <li>Frontend: HTML5, CSS3, Vanilla JavaScript</li>
                    <li>Visualization: Chart.js</li>
                    <li>Database: MySQL (backend) / JavaScript Objects (demo)</li>
                    <li>Deployment: GitHub Pages</li>
                </ul>

                <h3 style="color: #667eea; margin-top: 20px;">Project Team</h3>
                <ul style="margin-left: 20px; margin-top: 10px;">
                    <li>Bhargavi Salunkhe</li>
                    <li>Sakshi Patil</li>
                    <li>Shivanjali Pawar</li>
                </ul>
            </div>
        </div>

        <footer>
            <p>Election Management System - DBMS Project 2025</p>
            <p style="margin-top: 10px; font-size: 0.9em;">Database Application Development Assignment</p>
        </footer>
    </div>

    <script>
        // Database Objects
        const db = {
            parties: [
                {id: 1, name: 'BJP', symbol: 'Lotus'},
                {id: 3, name: 'Congress', symbol: 'Hand'},
                {id: 4, name: 'AAP', symbol: 'Broom'},
                {id: 5, name: 'YCP', symbol: 'Fan'},
                {id: 6, name: 'TDP', symbol: 'Plough'}
            ],
            candidates: [
                {id: 1, name: 'Bhargavi', partyId: 4, electionId: 103},
                {id: 2, name: 'Sakshi', partyId: 3, electionId: 105},
                {id: 3, name: 'Shivanjali', partyId: 4, electionId: 107},
                {id: 4, name: 'Akshay', partyId: 6, electionId: 109},
                {id: 5, name: 'Guru', partyId: 3, electionId: 101},
                {id: 6, name: 'Ram', partyId: 1, electionId: 109},
                {id: 7, name: 'Vikram', partyId: 1, electionId: 101},
                {id: 8, name: 'Hitender', partyId: 4, electionId: 104},
                {id: 9, name: 'Shanu', partyId: 5, electionId: 108},
                {id: 10, name: 'Vishnu', partyId: 1, electionId: 109}
            ],
            voters: [
                {id: 1, name: 'Bhargavi', sex: 'M', authorityId: 10, aadhaar: 1412},
                {id: 2, name: 'Ram', sex: 'M', authorityId: 20, aadhaar: 1734},
                {id: 9, name: 'Sita', sex: 'F', authorityId: 20, aadhaar: 1812},
                {id: 10, name: 'Siva', sex: 'M', authorityId: 30, aadhaar: 1914},
                {id: 11, name: 'Gopi', sex: 'F', authorityId: 30, aadhaar: 1617},
                {id: 12, name: 'Govind', sex: 'M', authorityId: 20, aadhaar: 1373},
                {id: 19, name: 'Krish', sex: 'M', authorityId: 10, aadhaar: 1472},
                {id: 20, name: 'Mothra', sex: 'F', authorityId: 10, aadhaar: 1893}
            ],
            elections: [
                {id: 101, voters: 1000, participants: 6, resultDate: '2019-3-22', ruling: '5', authorityId: 10},
                {id: 102, voters: 1100, participants: 7, resultDate: '2017-1-1', ruling: '6', authorityId: 20},
                {id: 103, voters: 5000, participants: 8, resultDate: '2016-5-3', ruling: '5', authorityId: 30},
                {id: 104, voters: 7000, participants: 5, resultDate: '2013-2-7', ruling: '5', authorityId: 10},
                {id: 105, voters: 8000, participants: 3, resultDate: '1946-1-6', ruling: '6', authorityId: 20},
                {id: 106, voters: 9000, participants: 2, resultDate: '1991-5-7', ruling: '4', authorityId: 30},
                {id: 107, voters: 3000, participants: 7, resultDate: '1997-1-8', ruling: '4', authorityId: 10},
                {id: 108, voters: 9500, participants: 9, resultDate: '1947-2-10', ruling: '5', authorityId: 20},
                {id: 109, voters: 8500, participants: 8, resultDate: '1949-6-11', ruling: '5', authorityId: 30}
            ],
            votes: [
                {id: 11, candidateId: 1, date: '1990-1-26', electionId: 103, voterId: 1},
                {id: 12, candidateId: 2, date: '1995-1-26', electionId: 106, voterId: 2},
                {id: 19, candidateId: 3, date: '2000-1-26', electionId: 101, voterId: 9},
                {id: 110, candidateId: 5, date: '2005-1-26', electionId: 102, voterId: 10},
                {id: 111, candidateId: 6, date: '2010-1-26', electionId: 104, voterId: 11},
                {id: 112, candidateId: 8, date: '2015-1-26', electionId: 108, voterId: 12},
                {id: 119, candidateId: 9, date: '2020-1-26', electionId: 107, voterId: 19},
                {id: 120, candidateId: 7, date: '2005-1-26', electionId: 107, voterId: 20}
            ],
            citizens: [
                {aadhaar: 1412, name: 'Bhargavi', dob: '2000-6-8', age: 20, gender: 'M'},
                {aadhaar: 1493, name: 'Bala', dob: '1989-6-7', age: 31, gender: 'M'},
                {aadhaar: 1734, name: 'Ram', dob: '1948-11-10', age: 72, gender: 'M'},
                {aadhaar: 1812, name: 'Sita', dob: '1895-6-5', age: 125, gender: 'F'},
                {aadhaar: 1914, name: 'Siva', dob: '1993-7-6', age: 27, gender: 'M'},
                {aadhaar: 1617, name: 'Gopal', dob: '1991-8-6', age: 29, gender: 'M'},
                {aadhaar: 1373, name: 'Govind', dob: '1982-5-7', age: 38, gender: 'M'},
                {aadhaar: 1472, name: 'Krish', dob: '1990-1-8', age: 30, gender: 'M'},
                {aadhaar: 1893, name: 'Mothra', dob: '1998-2-7', age: 22, gender: 'F'}
            ],
            authorities: [
                {id: 10, name: 'IEC', chief: 'Birla', experience: 'Y', established: '1998-8-15'},
                {id: 20, name: 'MCC', chief: 'Sitaraman', experience: 'Y', established: '1989-8-15'},
                {id: 30, name: 'AEC', chief: 'Chidambram', experience: 'N', established: '1998-8-15'}
            ]
        };

        // Helper Functions
        function getPartyName(partyId) {
            const party = db.parties.find(p => p.id === partyId);
            return party ? party.name : 'Unknown';
        }

        function getCandidateName(candidateId) {
            const candidate = db.candidates.find(c => c.id === candidateId);
            return candidate ? candidate.name : 'Unknown';
        }

        function getVoterName(voterId) {
            const voter = db.voters.find(v => v.id === voterId);
            return voter ? voter.name : 'Unknown';
        }

        function getAuthorityName(authorityId) {
            const authority = db.authorities.find(a => a.id === authorityId);
            return authority ? authority.name : 'Unknown';
        }

        // Tab Navigation
        function showTab(tabName) {
            document.querySelectorAll('.content').forEach(c => c.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');

            if (tabName === 'dashboard') renderDashboard();
            else if (tabName === 'parties') renderParties();
            else if (tabName === 'candidates') renderCandidates();
            else if (tabName === 'voters') renderVoters();
            else if (tabName === 'elections') renderElections();
            else if (tabName === 'results') renderResults();
        }

        // Search Function
        function searchTable(input, tableId) {
            const filter = input.value.toUpperCase();
            const table = document.getElementById(tableId);
            const tr = table.getElementsByTagName('tr');
            
            for (let i = 1; i < tr.length; i++) {
                const td = tr[i].getElementsByTagName('td');
                let found = false;
                for (let j = 0; j < td.length; j++) {
                    if (td[j].textContent.toUpperCase().indexOf(filter) > -1) {
                        found = true;
                        break;
                    }
                }
                tr[i].style.display = found ? '' : 'none';
            }
        }

        // Render Functions
        function renderDashboard() {
            document.getElementById('totalParties').textContent = db.parties.length;
            document.getElementById('totalCandidates').textContent = db.candidates.length;
            document.getElementById('totalVoters').textContent = db.voters.length;
            document.getElementById('totalElections').textContent = db.elections.length;

            const ctx = document.getElementById('dashboardChart');
            const partyCounts = {};
            db.candidates.forEach(c => {
                const partyName = getPartyName(c.partyId);
                partyCounts[partyName] = (partyCounts[partyName] || 0) + 1;
            });

            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: Object.keys(partyCounts),
                    datasets: [{
                        label: 'Number of Candidates',
                        data: Object.values(partyCounts),
                        backgroundColor: ['#667eea', '#764ba2', '#f093fb', '#4facfe', '#43e97b'],
                        borderWidth: 0,
                        borderRadius: 10
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: { display: true, position: 'top' },
                        title: { display: true, text: 'Candidates by Party', font: { size: 18 } }
                    },
                    scales: {
                        y: { beginAtZero: true, ticks: { stepSize: 1 } }
                    }
                }
            });
        }

        function renderParties() {
            const tbody = document.getElementById('partiesBody');
            tbody.innerHTML = '';
            db.parties.forEach(party => {
                const candidateCount = db.candidates.filter(c => c.partyId === party.id).length;
                tbody.innerHTML += `
                    <tr>
                        <td>${party.id}</td>
                        <td><strong>${party.name}</strong></td>
                        <td>${party.symbol}</td>
                        <td><span class="badge badge-primary">${candidateCount} Candidates</span></td>
                    </tr>
                `;
            });
        }

        function renderCandidates() {
            const tbody = document.getElementById('candidatesBody');
            tbody.innerHTML = '';
            db.candidates.forEach(candidate => {
                tbody.innerHTML += `
                    <tr>
                        <td>${candidate.id}</td>
                        <td><strong>${candidate.name}</strong></td>
                        <td>${getPartyName(candidate.partyId)}</td>
                        <td><span class="badge badge-info">Election ${candidate.electionId}</span></td>
                    </tr>
                `;
            });
        }

        function renderVoters() {
            const tbody = document.getElementById('votersBody');
            tbody.innerHTML = '';
            db.voters.forEach(voter => {
                tbody.innerHTML += `
                    <tr>
                        <td>${voter.id}</td>
                        <td><strong>${voter.name}</strong></td>
                        <td>${voter.sex === 'M' ? 'Male' : 'Female'}</td>
                        <td>${voter.authorityId}</td>
                        <td>${voter.aadhaar}</td>
                    </tr>
                `;
            });
        }

        function renderElections() {
            const tbody = document.getElementById('electionsBody');
            tbody.innerHTML = '';
            db.elections.forEach(election => {
                tbody.innerHTML += `
                    <tr>
                        <td><strong>${election.id}</strong></td>
                        <td>${election.voters.toLocaleString()}</td>
                        <td>${election.participants}</td>
                        <td>${election.resultDate}</td>
                        <td>${election.ruling} years</td>
                        <td>${getAuthorityName(election.authorityId)}</td>
                    </tr>
                `;
            });
        }

        function renderResults() {
            const tbody = document.getElementById('votesBody');
            tbody.innerHTML = '';
            db.votes.forEach(vote => {
                tbody.innerHTML += `
                    <tr>
                        <td>${vote.id}</td>
                        <td>${getCandidateName(vote.candidateId)}</td>
                        <td>${vote.date}</td>
                        <td><span class="badge badge-info">Election ${vote.electionId}</span></td>
                        <td>${getVoterName(vote.voterId)}</td>
                    </tr>
                `;
            });

            // Votes Chart
            const ctx = document.getElementById('votesChart');
            const voteCounts = {};
            db.votes.forEach(v => {
                const candidateName = getCandidateName(v.candidateId);
                voteCounts[candidateName] = (voteCounts[candidateName] || 0) + 1;
            });

            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: Object.keys(voteCounts),
                    datasets: [{
                        label: 'Votes Received',
                        data: Object.values(voteCounts),
                        backgroundColor: ['#667eea', '#764ba2', '#f093fb', '#4facfe', '#43e97b', '#fa709a', '#fee140', '#30cfd0'],
                        borderWidth: 2,
                        borderColor: '#fff'
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: { position: 'right' },
                        title: { display: true, text: 'Vote Distribution by Candidate', font: { size: 18 } }
                    }
                }
            });
        }

        function executeQuery(queryNum) {
            const resultsDiv = document.getElementById('queryResults');
            let html = '';

            switch(queryNum) {
                case 1:
                    // Party with most candidates after 1989
                    const partyCounts = {};
                    db.votes.filter(v => new Date(v.date) >= new Date('1989-1-1')).forEach(v => {
                        const candidate = db.candidates.find(c => c.id === v.candidateId);
                        if (candidate) {
                            const partyName = getPartyName(candidate.partyId);
                            partyCounts[partyName] = (partyCounts[partyName] || 0) + 1;
                        }
                    });
                    const maxParty = Object.entries(partyCounts).sort((a,b) => b[1] - a[1])[0];
                    html = `<div class="query-section"><h3>Query 1: Party with Most Candidates (After 1989)</h3>
                            <p><strong>Result:</strong> ${maxParty[0]} with ${maxParty[1]} candidates</p></div>`;
                    break;

                case 2:
                    // Voter change % 2010 to 2015
                    const votes2010 = db.votes.filter(v => v.date.includes('2010'));
                    const votes2015 = db.votes.filter(v => v.date.includes('2015'));
                    const election2010 = db.elections.find(e => votes2010.some(v => v.electionId === e.id));
                    const election2015 = db.elections.find(e => votes2015.some(v => v.electionId === e.id));
                    if (election2010 && election2015) {
                        const change = ((election2015.voters - election2010.voters) / election2010.voters * 100).toFixed(2);
                        html = `<div class="query-section"><h3>Query 2: Voter Change % (2010-2015)</h3>
                                <p><strong>2010 Voters:</strong> ${election2010.voters}</p>
                                <p><strong>2015 Voters:</strong> ${election2015.voters}</p>
                                <p><strong>Change:</strong> ${change}%</p></div>`;
                    }
                    break;

                case 3:
                    // Election authority history
                    html = '<div class="query-section"><h3>Query 3: Election Authority History</h3><table><tr><th>Authority</th><th>Years Active</th></tr>';
                    db.authorities.forEach(auth => {
                        const years = db.votes.filter(v => {
                            const voter = db.voters.find(vr => vr.id === v.voterId);
                            return voter && voter.authorityId === auth.id;
                        }).map(v => new Date(v.date).getFullYear());
                        html += `<tr><td>${auth.name}</td><td>${[...new Set(years)].sort().join(', ')}</td></tr>`;
                    });
                    html += '</table></div>';
                    break;

                case 4:
                    // Non-voter citizens
                    const voterAadhaars = new Set(db.voters.map(v => v.aadhaar));
                    const nonVoters = db.citizens.filter(c => !voterAadhaars.has(c.aadhaar));
                    html = `<div class="query-section"><h3>Query 4: Citizens Who Are Not Voters</h3>
                            <p><strong>Total Non-Voters:</strong> ${nonVoters.length}</p>
                            <p><strong>Names:</strong> ${nonVoters.map(c => c.name).join(', ')}</p></div>`;
                    break;

                case 5:
                    // State assembly authorities
                    html = `<div class="query-section"><h3>Query 5: Election Authorities</h3>
                            <table><tr><th>Authority</th><th>Chief</th><th>Established</th><th>Experience</th></tr>`;
                    db.authorities.forEach(auth => {
                        html += `<tr><td>${auth.name}</td><td>${auth.chief}</td><td>${auth.established}</td>
                                <td><span class="badge badge-${auth.experience === 'Y' ? 'success' : 'info'}">${auth.experience === 'Y' ? 'Experienced' : 'New'}</span></td></tr>`;
                    });
                    html += '</table></div>';
                    break;
            }

            resultsDiv.innerHTML = html;
        }

        // Initialize on load
        window.onload = () => {
            renderDashboard();
            renderParties();
            renderCandidates();
            renderVoters();
            renderElections();
            renderResults();
        };
    </script>
</body>
</html>
